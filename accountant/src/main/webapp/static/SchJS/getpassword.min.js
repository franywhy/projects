$(document).ready(function () {
    var wordInput = $("#txt_Username");

    //给文本框添加键盘按下并弹起的事件
    wordInput.keyup(function (event) {
        var wordText = $("#txt_Username").val();

    });

    //给文本框添加鼠标移开事件
    wordInput.blur(function (event) {
        var wordText = $("#txt_Username").val();
        if (wordText == '') {
            $("#txt_Username").val("请输入常用邮箱或者手机号");
        }
    });

    //给文本框添加鼠标按下并弹起的事件
    wordInput.mousedown(function (event) {
        var wordText = $("#txt_Username").val();
        if (wordText == '请输入常用邮箱或者手机号') {
            $("#txt_Username").val("");
        }

    });


    $(function () {
        $("#txt_Username").blur(function () {
            if (/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test($(this).val()) == false) {
                if (!$("#txt_Username").val().match(/^\d{11}$/)) {
                    $("#mailinfo").text("邮箱或手机号码格式不正确，请重新输入！");
                }
                else {
                    $("#mailinfo").text('');
                    $("#hidType").val("5");
                }
            }
            else {
                $("#mailinfo").text('');
                $("#hidType").val("4");
            }
        })

        $("#register").live("click", function () {
            var username = $("#txt_Username").val();
            var code = $("#txt_Code").val();
            var type = $("#hidType").val();
            if (username == "") {
                alert("邮箱或手机号码格式不正确，请重新输入！");
                return;
            }
            else {
                var reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
                if (!reg.test(username)) {
                    if (!$("#txt_Username").val().match(/^\d{11}$/)) {
                        alert("邮箱或手机号码格式不正确，请重新输入！");
                        return false;
                    }
                }
            }
            $.ajax({
                type: "POST",
                url: "/lib/loginHandler.ashx",
                data: {
                    type: type,
                    name: username,
                    code: code
                },
                cache: false,
                beforeSend: function () {
                    $("#register").html("正在获取中...");
                },
                success: function (result) {
                    $("#register").html("找回密码");
                    alert(result);
                }
            });
        });




        $(".yzm_mobile").live("click", function () {
            var username = $("#txt_Username").val();

            if (!$("#txt_Username").val().match(/^(((13[0-9]{1})|159|153)+\d{8})$/)) {
                alert("手机号码格式不正确，请重新输入！");
                return false;
            }

            $.ajax({
                type: "POST",
                url: "lib/loginHandler.ashx",
                data: {
                    type: "0",
                    name: username
                },
                cache: false,
                success: function (result) {

                    alert(result);
                }
            });
        });


    })
})
function isSmall(str, len) {
    if (str.length < len) {
        return (true);
    } else {
        return (false);
    }
}