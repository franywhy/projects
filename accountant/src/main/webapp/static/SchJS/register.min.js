function Showshow(Dthis) {
    SelectDefaultshow();
    var f = document.getElementById("showcheckyule").getElementsByTagName("div");
    for (var i = 0; i < f.length; i++) {
        if (f[i].className == "loginForm1") {
            f[i].style.display = 'none';
        }
    }

    document.getElementById(Dthis.id + "1").style.display = "block";

    Dthis.className = 'tab_a_active';

}

function SelectDefaultshow() {
    var L = document.getElementById("show_yl").getElementsByTagName("a");
    for (var i = 0; i < L.length; i++) {
        if (L[i] != null) {
            L[i].className = "tab_a";
        }
    }
}

$(document).ready(function () {
    var wordInput = $("#txt_Username");
    var wordInput1 = $("#txt_Username1");
    var wordInput2 = $("#txt_Code1");


    //给文本框添加鼠标移开事件
    wordInput.blur(function (event) {
        var wordText = $("#txt_Username").val();
        if (wordText == '') {
            $("#txt_Username").val("请输入邮箱");
        }
    });
    wordInput1.blur(function (event) {
        var wordText = $("#txt_Username1").val();
        if (wordText == '') {
            $("#txt_Username1").val("请输入手机号");
        }
    });
    wordInput2.blur(function (event) {
        var wordText = $("#txt_Code1").val();
        if (wordText == '') {
            $("#txt_Code1").val("输入手机验证码");
        }
    });

    //给文本框添加鼠标按下并弹起的事件
    wordInput.mousedown(function (event) {
        var wordText = $("#txt_Username").val();
        if (wordText == '请输入邮箱') {
            $("#txt_Username").val("");
        }

    });
    wordInput1.mousedown(function (event) {
        var wordText = $("#txt_Username1").val();
        if (wordText == '请输入手机号') {
            $("#txt_Username1").val("");
        }

    });
    wordInput2.mousedown(function (event) {
        var wordText = $("#txt_Code1").val();
        if (wordText == '输入手机验证码') {
            $("#txt_Code1").val("");
        }

    });
    $("#login_password_text1").focus(function () {
        var _obj = $(this);
        _obj.hide();
        _obj.prev().show();
        _obj.prev().focus();
    });

    $("#txt_Password").blur(function () {
        if ($(this).val() == '') {
            $(this).hide();
            $(this).next().show();
        }
    });

    $("#login_password_text2").focus(function () {
        var _obj = $(this);
        _obj.hide();
        _obj.prev().show();
        _obj.prev().focus();
    });

    $("#txt_ComPassword").blur(function () {
        if ($(this).val() == '') {
            $(this).hide();
            $(this).next().show();
        }
    });

    $("#login_password_text11").focus(function () {
        var _obj = $(this);
        _obj.hide();
        _obj.prev().show();
        _obj.prev().focus();
    });

    $("#txt_Password1").blur(function () {
        if ($(this).val() == '') {
            $(this).hide();
            $(this).next().show();
        }
    });

    $("#login_password_text21").focus(function () {
        var _obj = $(this);
        _obj.hide();
        _obj.prev().show();
        _obj.prev().focus();
    });

    $("#txt_ComPassword1").blur(function () {
        if ($(this).val() == '') {
            $(this).hide();
            $(this).next().show();
        }
    });


    $(function () {
        $("#txt_Username").blur(function () {
            if (/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test($(this).val()) == false) {
                $("#mailinfo").text("邮箱格式不正确，请重新输入！");
            }
            else {
                $("#mailinfo").text('');
            }
        })

        $("#txt_Password").blur(function () {
            if (/[^\s]{6,20}/.test($(this).val()) == false) {
                $("#passinfo").text("密码由6-20位英文字母、数字或特殊符号组成！");
            }
            else {
                $("#passinfo").text('');
            }
        })
        $("#txt_Password1").blur(function () {
            if (/[^\s]{6,20}/.test($(this).val()) == false) {
                $("#passinfo1").text("密码由6-20位英文字母、数字或特殊符号组成！");
            }
            else {
                $("#passinfo1").text('');
            }
        })
        $("#txt_ComPassword").blur(function () {
            if ($("#txt_ComPassword").val() != $("#txt_Password").val()) {
                $("#passinfo").text("两次输入的密码不一致，请重新输入！");
            }
            else {
                $("#passinfo").text('');
            }
        })
        $("#txt_ComPassword1").blur(function () {
            if ($("#txt_ComPassword1").val() != $("#txt_Password1").val()) {
                $("#passinfo1").text("两次输入的密码不一致，请重新输入！");
            }
            else {
                $("#passinfo1").text('');
            }
        })

        $("#register").live("click", function () {
            var username = $("#txt_Username").val();
            var userpass = $("#txt_Password").val();
            var code = $("#txt_Code").val();
            var url = $("#hidUrl").val();
            var check = document.getElementById("cb_Check").checked;
            if (username == "") {
                //                alert("邮箱格式不正确，请重新输入！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>邮箱格式不正确");
                openStaticPopup();
                return;
            }
            else {
                var reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
                if (!reg.test(username)) {
                    //                    alert("邮箱格式不正确，请重新输入！");
                    $("#mode_tips").html("<span class='gtl_ico_hits'></span>邮箱格式不正确");
                    openStaticPopup();
                    return false;
                }
            }
            if (userpass == "") {
                //                alert("请输入正确的密码格式！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>密码格式不正确");
                openStaticPopup();
                return;
            }
            else {
                var reg = /[^\s]{6,20}/;
                if (!reg.test(userpass)) {
                    //                    alert("密码格式不正确，请重新填写！");
                    $("#mode_tips").html("<span class='gtl_ico_hits'></span>密码格式不正确");
                    openStaticPopup();
                    return false;
                }
            }
            if ($("#txt_ComPassword").val() != $("#txt_Password").val()) {
                //                alert("两次输入的密码不一致，请重新输入！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>两次输入的密码不一致");
                openStaticPopup();
                return;
            }
            if (check == false) {
                //                alert("请阅读会计城用户协议！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>请阅读会计城用户协议");
                openStaticPopup();
                return;
            }
            $.ajax({
                type: "POST",
                url: "lib/loginHandler.ashx",
                data: {
                    type: "2",
                    name: username,
                    pass: userpass,
                    code: code
                },
                cache: false,
                disables: "#register",
                beforeSend: function () {
                    $("#register").html("正在注册...");
                },
                success: function (result) {
                    if (result == '000') {
                        if (url == '') {
                            window.location.href = "index.html";
                        }
                        else {
                            window.location.href = url;
                        }
                    }
                    else {
                        $("#register").html("注 &nbsp; &nbsp; 册");
                        $("#mode_tips").html("<span class='gtl_ico_hits'></span>" + result + "");
                        openStaticPopup();
                    }
                }
            });
        });

        $("#register1").live("click", function () {
            var username = $("#txt_Username1").val();
            var userpass = $("#txt_Password1").val();
            var code = $("#txt_Code1").val();
            var url = $("#hidUrl").val();
            var check = document.getElementById("cb_Check1").checked;
            if (username == "") {
                //                alert("手机号码格式不正确，请重新输入！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>手机号码格式不正确");
                openStaticPopup();
                return;
            }
            else {
                if (!$("#txt_Username1").val().match(/^\d{11}$/)) {
                    //                    alert("手机号码格式不正确，请重新输入！");
                    $("#mode_tips").html("<span class='gtl_ico_hits'></span>手机号码格式不正确");
                    openStaticPopup();
                    return false;
                }
            }
            if (userpass == "") {
                //                alert("请输入正确的密码格式！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>密码格式不正确");
                openStaticPopup();
                return;
            }
            else {
                var reg = /[^\s]{6,20}/;
                if (!reg.test(userpass)) {
                    //                    alert("密码格式不正确，请重新填写！");
                    $("#mode_tips").html("<span class='gtl_ico_hits'></span>密码格式不正确");
                    openStaticPopup();
                    return false;
                }
            }
            if ($("#txt_ComPassword1").val() != $("#txt_Password1").val()) {
                //                alert("两次输入的密码不一致，请重新输入！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>两次输入的密码不一致");
                openStaticPopup();
                return;
            }
            if (check == false) {
                //                alert("请阅读会计城用户协议！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>请阅读会计城用户协议");
                openStaticPopup();
                return;
            }
            $.ajax({
                type: "POST",
                url: "lib/loginHandler.ashx",
                data: {
                    type: "3",
                    name: username,
                    pass: userpass,
                    code: code
                },
                cache: false,
                disables: "#register1",
                beforeSend: function () {
                    $("#register1").html("正在注册...");
                },
                success: function (result) {
                    $("#loading1").empty();
                    if (result == '000') {
                        if (url == '') {
                            window.location.href = "index.html";
                        }
                        else {
                            window.location.href = url;
                        }
                    }
                    else {
                        $("#register").html("注 &nbsp; &nbsp; 册");
                        $("#mode_tips").html("<span class='gtl_ico_hits'></span>" + result + "");
                        openStaticPopup();
                    }
                }
            });
        });


        $("#yzm_mobile").live("click", function () {
            var username = $("#txt_Username1").val();

            if (!$("#txt_Username1").val().match(/^\d{11}$/)) {
                //                alert("手机号码格式不正确，请重新输入！");
                $("#mode_tips").html("<span class='gtl_ico_hits'></span>手机号码格式不正确");
                openStaticPopup();
                return false;
            }
            if (!counting) return;
            counting = false;

            $.ajax({
                type: "POST",
                url: "lib/loginHandler.ashx",
                data: {
                    type: "0",
                    name: username
                },
                cache: false,
                success: function (result) {
                    countTime();
                    //                    $("#yzm_mobile").addClass("cur").html("60秒后可再获取");
                    $("#yzm_mobile").html("60秒后可再获取");
                    counting = false;
                }
            });
        });


    })
})

var counting = true;
var wait;
function countTime() {
    var e = jQuery;
    if (counting) return;
    secs = 60;
    counting = true;
    wait = secs * 1e3;

    for (i = 1; i <= wait / 1e3; i++) {
        window.setTimeout("doUpdate(" + i + ")", i * 1e3)
    }
}
function doUpdate(e) {
    var t = jQuery;
    if (e == wait / 1e3) {
        //        t(".yzm_mobile").removeClass("cur").html("<a href='javascript:'>没收到？再获取</a>");
        t("#yzm_mobile").html("<a href='javascript:'>没收到？再获取</a>");
        counting = true;
        t("#yzm_mobile").attr("disable", "false")
    } else {
        wut = wait / 1e3 - e;
        t("#yzm_mobile").attr("disable", "true");
        t("#yzm_mobile").html(wut + "秒后可再获取")
    }
}
function isSmall(str, len) {
    if (str.length < len) {
        return (true);
    } else {
        return (false);
    }
}
try {
    $.setupJMPopups({
        screenLockerBackground: "#003366",
        screenLockerOpacity: "0.5"
    });
} catch (e) { }

function openStaticPopup() {
    $.openPopupLayer({
        name: "myStaticPopup",
        width: 1000,
        target: "myHiddenDiv1"
    });
}